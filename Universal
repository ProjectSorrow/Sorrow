local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local player = Players.LocalPlayer

pcall(function()
	player.PlayerGui:FindFirstChild("HamudiUniversalGUI"):Destroy()
	player.PlayerGui:FindFirstChild("HamudiUniversalToggle"):Destroy()
end)

local gui = Instance.new("ScreenGui")
gui.Name = "HamudiUniversalGUI"
gui.ResetOnSpawn = false
gui.Parent = player.PlayerGui

local main = Instance.new("Frame")
main.Parent = gui
main.Size = UDim2.fromOffset(460,400)
main.Position = UDim2.fromScale(0.5,0.5)
main.AnchorPoint = Vector2.new(0.5,0.5)
main.BackgroundColor3 = Color3.fromRGB(20,20,20)
main.Active = true
main.Draggable = true
Instance.new("UICorner", main).CornerRadius = UDim.new(0,18)
Instance.new("UIStroke", main).Color = Color3.fromRGB(90,90,90)

local topBar = Instance.new("Frame", main)
topBar.Size = UDim2.new(1,0,0,50)
topBar.BackgroundColor3 = Color3.fromRGB(26,26,26)
Instance.new("UICorner", topBar).CornerRadius = UDim.new(0,18)

local title = Instance.new("TextLabel", topBar)
title.Size = UDim2.new(1,-60,1,0)
title.Position = UDim2.new(0,14,0,0)
title.BackgroundTransparency = 1
title.Text = "üåê Hamudi Universal"
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextColor3 = Color3.new(1,1,1)
title.TextXAlignment = Enum.TextXAlignment.Left

local closeBtn = Instance.new("TextButton", topBar)
closeBtn.Size = UDim2.fromOffset(36,36)
closeBtn.Position = UDim2.new(1,-44,0.5,-18)
closeBtn.Text = "üóô"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.BackgroundColor3 = Color3.fromRGB(170,60,60)
closeBtn.TextColor3 = Color3.new(1,1,1)
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(1,0)

local scroll = Instance.new("ScrollingFrame", main)
scroll.Position = UDim2.new(0,0,0,54)
scroll.Size = UDim2.new(1,0,1,-54)
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y
scroll.ScrollBarImageTransparency = 0.3
scroll.BackgroundTransparency = 1

local layout = Instance.new("UIListLayout", scroll)
layout.Padding = UDim.new(0,12)
local padding = Instance.new("UIPadding", scroll)
padding.PaddingTop = UDim.new(0,12)
padding.PaddingLeft = UDim.new(0,12)
padding.PaddingRight = UDim.new(0,12)

local function createToggle(text)
	local btn = Instance.new("TextButton", scroll)
	btn.Size = UDim2.new(1,0,0,44)
	btn.BackgroundColor3 = Color3.fromRGB(35,35,35)
	btn.TextColor3 = Color3.new(1,1,1)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 15
	btn.Text = text..": OFF"
	btn.AutoButtonColor = false
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0,14)
	Instance.new("UIStroke", btn).Color = Color3.fromRGB(70,70,70)
	return btn
end

local function createSlider(label,min,max,default)
	local holder = Instance.new("Frame", scroll)
	holder.Size = UDim2.new(1,0,0,60)
	holder.BackgroundTransparency = 1

	local text = Instance.new("TextLabel", holder)
	text.Size = UDim2.new(1,0,0,20)
	text.Position = UDim2.new(0,0,0,0)
	text.BackgroundTransparency = 1
	text.Text = label..": "..default
	text.Font = Enum.Font.Gotham
	text.TextSize = 14
	text.TextColor3 = Color3.new(1,1,1)
	text.TextXAlignment = Enum.TextXAlignment.Left

	local bar = Instance.new("Frame", holder)
	bar.Position = UDim2.new(0,0,0,30)
	bar.Size = UDim2.new(1,0,0,10)
	bar.BackgroundColor3 = Color3.fromRGB(50,50,50)
	Instance.new("UICorner", bar).CornerRadius = UDim.new(1,0)

	local fill = Instance.new("Frame", bar)
	fill.Size = UDim2.new((default-min)/(max-min),0,1,0)
	fill.BackgroundColor3 = Color3.fromRGB(80,160,90)
	Instance.new("UICorner", fill).CornerRadius = UDim.new(1,0)

	local value = default
	local dragging = false

	bar.InputBegan:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = true end
	end)

	bar.InputEnded:Connect(function(i)
		if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = false end
	end)

	UIS.InputChanged:Connect(function(i)
		if dragging and (i.UserInputType == Enum.UserInputType.MouseMovement or i.UserInputType == Enum.UserInputType.Touch) then
			local pct = math.clamp((i.Position.X - bar.AbsolutePosition.X)/bar.AbsoluteSize.X,0,1)
			fill.Size = UDim2.new(pct,0,1,0)
			value = math.floor(min + (max-min)*pct)
			text.Text = label..": "..value
		end
	end)
	return function() return value end
end

local speedToggle = createToggle("Speed Boost")
local getSpeed = createSlider("Speed",16,100,16)
local jumpToggle = createToggle("Jump Boost")
local getJump = createSlider("Jump",50,150,50)
local infJumpToggle = createToggle("Infinite Jump")
local espToggle = createToggle("ESP (Red)")
local iyBtn = Instance.new("TextButton", scroll)
iyBtn.Size = UDim2.new(1,0,0,44)
iyBtn.BackgroundColor3 = Color3.fromRGB(50,50,150)
iyBtn.TextColor3 = Color3.new(1,1,1)
iyBtn.Font = Enum.Font.Gotham
iyBtn.TextSize = 15
iyBtn.Text = "Infinite Yield"
Instance.new("UICorner", iyBtn).CornerRadius = UDim.new(0,14)
Instance.new("UIStroke", iyBtn).Color = Color3.fromRGB(70,70,70)

local speedOn,jumpOn,infJumpOn,espOn = false,false,false,false
local espObjs = {}

RunService.Heartbeat:Connect(function()
	local char = player.Character
	local hum = char and char:FindFirstChildOfClass("Humanoid")
	if hum then
		hum.WalkSpeed = speedOn and getSpeed() or 16
		hum.JumpPower = jumpOn and getJump() or 50
	end
end)

speedToggle.MouseButton1Click:Connect(function()
	speedOn = not speedOn
	speedToggle.Text = "Speed Boost: "..(speedOn and "ON" or "OFF")
	speedToggle.BackgroundColor3 = speedOn and Color3.fromRGB(50,160,50) or Color3.fromRGB(35,35,35)
end)

jumpToggle.MouseButton1Click:Connect(function()
	jumpOn = not jumpOn
	jumpToggle.Text = "Jump Boost: "..(jumpOn and "ON" or "OFF")
	jumpToggle.BackgroundColor3 = jumpOn and Color3.fromRGB(50,160,50) or Color3.fromRGB(35,35,35)
end)

infJumpToggle.MouseButton1Click:Connect(function()
	infJumpOn = not infJumpOn
	infJumpToggle.Text = "Infinite Jump: "..(infJumpOn and "ON" or "OFF")
	infJumpToggle.BackgroundColor3 = infJumpOn and Color3.fromRGB(50,160,50) or Color3.fromRGB(35,35,35)
end)

UIS.JumpRequest:Connect(function()
	if infJumpOn then
		local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
	end
end)

espToggle.MouseButton1Click:Connect(function()
	espOn = not espOn
	espToggle.Text = "ESP (Red): "..(espOn and "ON" or "OFF")
	espToggle.BackgroundColor3 = espOn and Color3.fromRGB(50,160,50) or Color3.fromRGB(35,35,35)
	for _,plr in pairs(Players:GetPlayers()) do
		if plr ~= player and plr.Character then
			if espOn then
				local h = Instance.new("Highlight", plr.Character)
				h.FillColor = Color3.fromRGB(255,0,0)
				h.OutlineColor = Color3.new(1,1,1)
				espObjs[plr] = h
			elseif espObjs[plr] then
				espObjs[plr]:Destroy()
				espObjs[plr] = nil
			end
		end
	end
end)

iyBtn.MouseButton1Click:Connect(function()
	loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
end)

local toggleGui = Instance.new("ScreenGui", player.PlayerGui)
toggleGui.Name = "HamudiUniversalToggle"
local toggleBtn = Instance.new("TextButton", toggleGui)
toggleBtn.Size = UDim2.fromOffset(52,52)
toggleBtn.Position = UDim2.fromScale(0.05,0.6)
toggleBtn.Text = "H"
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 22
toggleBtn.BackgroundColor3 = Color3.fromRGB(40,40,40)
toggleBtn.TextColor3 = Color3.new(1,1,1)
toggleBtn.Active = true
toggleBtn.Draggable = true
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1,0)
Instance.new("UIStroke", toggleBtn).Color = Color3.fromRGB(90,90,90)

closeBtn.MouseButton1Click:Connect(function()
	main.Visible = false
end)
toggleBtn.MouseButton1Click:Connect(function()
	main.Visible = not main.Visible
end)
